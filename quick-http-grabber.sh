#!/bin/sh

####################################
##
## Description: This Script tries to Curl an URL (or List) with standard http/s Ports, generates a Screenshot of the Homepage and 
## insert it into a File for further inspection
## Standard Enumeration on Ports 80, 443, 8080
##
#####################################

## main function
singleScan()
{
  if [ ! -z "$3" ]; then
	  echo "DEBUG: LATER ADDING NAMP SCAN"
  else
	  curl $1:$2>/dev/null 2>&1
	  if [ ! "$?" = 0 ]; then return 1; fi
  fi
          
}

prepareScan()
{
  for host in $1 do;
  	for port in $2 do;
	    singleScan $host $port $3
	    if [ "$?" = 0 ]; then echo "Received Response from $host on port $port"; fi
	done		
  done
}


usage()
{
       echo "Usage: quick-http-grabber.sh -h=<hostname/ip> -p=<port>"
       echo "Options: "
       echo " --Hlist - Path to File containing hostnames / ip-addresses"
       echo " --Plist - Path to Portlist"
       echo " -p - Single-Port"
       echo " -h - Single-Host"
       echo " -n - Scan-Using NMAP"
}

## Enumerate Options
if [ "$@" < 1 ]; then usage; fi


for arg in "$@"; do
    if [ $(echo $arg | grep -e "-Hlist") ]; then HOSTLISTPATH=$(echo $arg | cut -d "=" -f 2); fi 
    if [ $(echo $arg | grep -e "-Plist") ]; then PORTLISTPATH=$(echo $arg | cut -d "=" -f 2); echo $PORTLISTPATH; fi
    if [ $(echo $arg | grep -e "-p") ]; then SINGLEPORT=$(echo $arg | cut -d "=" -f 2); echo $SINGLEPORT; fi
    if [ $(echo $arg | grep -e "-h") ]; then SINGLEHOST=$(echo $arg | cut -d "=" -f 2); echo $SINGLEHOST; fi
    if [ $(echo $arg | grep -e "-n") ]; then NMAPSCAN=$(echo $arg | cut -d "=" -f 2); echo $NMAPSCAN; fi
done

## Filtering  User Input

if [ ! -z "$HOSTLISTPATH" ] && [ ! -z "$SINGLEHOST" ]; then echo "Select a Singlhost OR a Hostlist!"; fi
if [ ! -z "$PORTLISTPATH" ] && [ ! -z "$SINGLEPORT" ]; then echo "Select a Singleport OR use a Portlist"; fi
if [ -z "$HOSTLISTPATH" ] || [ -z "$SINGLEHOST" ]; then usage; fi

## Try to import lists

if [ ! -z "$HOSTLISTPATH" ]; then 
	HL=$(cat $HOSTLISTPATH)
	if [ ! "$?" = 0 ]; then echo "Error importing data, Aborting"; exit 1; fi
	if [ ! -f "$PORTLISTPATH" ]; then
		PL=$(cat $PORTLISTPATH)
		if [ ! "$?" = 0 ]; then 
			echo "Portlist import didn't work.. failback to Port 80, 8080 and 443"
			PL="80 8080 443"
		fi
	fi
   prepareScan $HL $PL $NMAPSCAN		
fi	

if [ ! -z "$SINGLEHOST" ]; then
	SL=$SINGLEHOST
	if 




